\chapter[Mise en \oe uvre du calorimètre électromagnétique]{Mise en \oe uvre du calorimètre électromagnétique à argon liquide du détecteur Atlas}

Dans ce chapitre, nous rappellerons les notions élémentaires de calorimétrie avant de décrire les calorimètres à argon liquide, tonneau et bouchons, du détecteur Atlas. Nous discutons ensuite de la calibration électronique de ces sous-détecteurs dans laquelle j'ai été impliqué.

\section{Calorimétrie}

Le rôle premier d'un calorimètre est la mesure de l'énergie des particules. On parle de calorimètre électromagnétique si le détecteur est conçu dans le but de mesurer l'énergie de particules électromagnétiques telles que les électrons ou les photons et on parle de calorimètre hadronique si le but est de mesurer l'énergie de particules hadroniques. Le second rôle est la mesure de la position du dépôt.

Le principe élémentaire d'un calorimètre consiste à fournir un milieu très dense à l'intérieur duquel les particules, au delà de quelques centaines de MeV, subissent successivement le Bremsstrahlung $ e^\pm\to e^\pm\gamma $ et la production de paires d'électrons $ \gamma\to e^+e^- $.

\subsection{Interaction électrons/photons et matière}

La façon dont interagissent les particules chargées et la matière dépend de l'échelle d'énergie. La figure \ref{interpb} montre la distribution de la fraction d'énergie perdue par longueur de radiation en fonction de l'énergie. L'ionisation, la diffusion Compton et l'effet photoélectrique dominent à basse énergie alors que l'émission de photons de freinage (Bremsstrahlung) domine à partir d'une énergie de quelques $ \MeV $. Auprès du LHC, les électrons ont une gamme d'énergie transverse qui s'étend, en moyenne, de quelques $ \GeV $ jusqu'au $ \TeV $. Les deux phénomènes dominants sont donc l'émission de photons de freinage et la production de paires électron/positron.\\

\begin{figure}[!h]
  \begin{center}
    \includegraphics[height=5.0cm, keepaspectratio]{phd_calo/dEdx}
  \end{center}
  \caption{\label{interpb}Distribution de la fraction d'énergie perdue par longueur de radiation en fonction de l'énergie.}
\end{figure}

Dans la pratique, lorsqu'un électron (resp. un photon) de haute énergie pénètre un milieu dense, il émet des photons de freinages (resp. il produit une paire d'électrons) puis ces photons (resp. ces électrons) vont produire une paire d'électrons (resp. vont émettre des photons de freinage). Il se forme alors une gerbe/cascade de particules caractérisées par deux principales grandeurs, la longueur de radiation $ X_0 $ pour les électrons et le libre parcours moyen $ X_\gamma $ pour les photons.

\newpage

\paragraph{Longueur de radiation}

Pour les électrons, on définit la longueur de radiation par l'épaisseur de matière nécessaire pour une perte d'énergie d'un facteur $ \frac{1}{e} $ soit encore $ \sim63\% $. Elle s'exprime en fonction du nombre de masse $ A $ et du nombre de protons $ Z $ :
\begin{equation}
  X_0=\frac{1}{4\alpha_{EM}N_Ar^2_e}\frac{A}{Z^2\ln\left(\frac{183}{\sqrt[3]{Z}}\right)}.
\end{equation}

\noindent où $ \alpha_{EM} $ est la constante de structure fine, $ N_A $ le nombre d'Avogadro et $ r_e $ est le rayon de Compton. La perte d'énergie par rayonnement de freinage s'écrit :
\begin{equation}
  \left.-\frac{dE}{dx}\right|_\textrm{Brem.}=\frac{E}{X_0}
\end{equation}

\paragraph{Libre parcours moyen} Pour les photons, on définit le libre parcours moyen par l'épaisseur de matière nécessaire pour la conversion en paire électron/positron. De même que pour la longueur de radiation, le libre parcours moyen s'exprime\footnote{Le facteur $ \frac{9}{7} $ provient de la section efficace de création de pairs d'électrons : $ \sigma_{paire}=\frac{7}{9}\frac{A}{N_AX_0} $.} en fonction du nombre de masse $ A $ et du nombre de protons $ Z $ :
\begin{equation}
  X_\gamma=\frac{9}{7}X_0
\end{equation}

Plus le milieu est dense, ou encore plus le nombre de masse est élevé, plus la longueur de radiation et le libre parcours moyen sont petits. Un bon calorimètre électromagnétique se doit de posséder une épaisseur de quelques longueur de radiations afin de contenir les gerbes dans leur entièreté. Le choix est effectué en confrontant la compacité du calorimètre avec avec le poids du matériau. Le tableau \ref{matcalo} montre la longueur de radiation et le libre parcours moyen de quelques matériaux.

\begin{table}[!ht]
  \begin{center}

    \begin{tabular}{|c|c|c|c|}
      \hline
      \hline
        Matériau & $ X_0 $ \small{$ \left[g\,cm^{-2}\right] $} & $ X_\gamma $ \small{$ \left[g\,cm^{-2}\right] $} & $ R_M $ \small{$ \left[cm\right] $} \\
      \hline
	$ Ar $ (liquide) & $ 19.6 $ & $ 25.2 $ & $ 9.0 $\\
	$ Al $ & $ 24.0 $ & $ 30.9 $ & $ 4.4 $\\
	$ Fe $ & $ 13.8 $ & $ 17.8 $ & $ 1.7 $\\
	$ Cu $ & $ 12.9 $ & $ 16.5 $ & $ 1.5 $\\
        $ W $ & $ 6.8 $ & $ 8.7 $ & $ 0.9 $\\
        $ Pb $ & $ 6.37 $ & $ 8.2 $ & $ 1.6 $\\
        $ U $ & $ 5.9 $ & $ 7.5 $ & $ 1.0 $\\
      \hline
        $ H_2O $ (liquide) & $ 36.1 $ & $ 46.4 $ & $ 9.7 $\\
        $ NaI $ & $ 9.5 $ & $ 12.2 $ & $ 4.1 $\\
      \hline
    \end{tabular}

  \end{center}
  \caption{\label{matcalo} Longueur de radiation, le libre parcours moyen et rayon de Molière de quelques matériaux.}
\end{table}

\paragraph{Énergie critique} On définit l'énergie critique comme l'énergie au delà de laquelle le rayonnement de freinage est dominant c'est-à-dire telle que :
\begin{equation}
  \left.-\frac{dE}{dx}(E=E_c)\right|_\textrm{Brem.}=\left\{\left.-\frac{dE}{dx}\propto\frac{1}{\beta^2}\right\}(E=E_c)\right|_\textrm{Ion.}
\end{equation}

De même que pour la longueur de radiation et le libre parcours moyen, l'énergie critique s'exprime de façon empirique en fonction du nombre de protons $ Z $ :
\begin{eqnarray}
  E_c\approx\frac{610}{Z+1.24}\MeV & \textrm{pour les solides et les liquides}\\
  E_c\approx\frac{710}{Z+0.92}\MeV & \textrm{pour les gaz}
\end{eqnarray}

\subsection{Gerbes électromagnétiques}

\paragraph{Profil longitudinal} Introduisons la variable $ t\equiv\frac{x}{X_0} $ afin de décrire le développement longitudinal des gerbes électromagnétiques. Dans un modèle simpliste, au rang $ t $, chaque particule de la gerbe possède une énergie $ E(t)=E_0\,2^{-t} $ où $ E_0 $ est l'énergie de la particule incidente, voir figure \ref{em_shower}. Il est alors possible d'écrire :
\begin{eqnarray}
  \frac{dE}{dt}=-E_0\ln2\,e^{-t}\hspace{0.04cm} & \textrm{modèle simpliste}\\
  \frac{dE}{dt}=E_0\frac{b^at^{a-1}}{\Gamma(a)}e^{-t} & \begin{minipage}{8cm} \begin{center} modèle de Longo et Sestili\\où $ a $ et $ b $ sont des paramètres du milieu \end{center} \end{minipage}
\end{eqnarray}

\begin{figure}[!ht]
  \begin{center}
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/em_shower}
  \end{center}
  \caption{\label{em_shower}Modèle simpliste de gerbe électromagnétique.}
\end{figure}

La gerbe électromagnétique commence à décroitre dés que l'énergie des particules est inférieure à l'énergie critique si bien qu'il est simple de calculer le maximum de la gerbe :
\begin{eqnarray}
  t_{max}=\log_2\left(\frac{E_0}{E_c}\right) & \textrm{modèle simpliste}\\
  t_{max}=\ln\left(\frac{E_0}{E_c}\right)-\left\{\begin{array}{cc}1&\textrm{gerbe d'électron}\\1/2&\textrm{gerbe de photon}\end{array}\right.
 & \textrm{modèle de Longo et Sestili}
\end{eqnarray}

Il est alors possible de définir la longueur $ t_{95\%} $ telle que au moins $ 95\% $ de l'énergie de la gerbe électromagnétique soit contenue dans la longeur $ t_{95\%} $ :
\begin{equation}
  t_{95\%}\approx t_{max}+0.08Z+9.6[X_0]
\end{equation}

\paragraph{Profil transverse} On montre que l'angle moyen de déflexion des particules de la gerbe, pour le Bremsstrahlung et la production de paires électron/prositron, peut s'écrire :
\begin{equation}
  \left<\theta\right>=\underbrace{\sqrt{\frac{4\pi}{\alpha_{EM}}}(m_ec^2)}_{E_s\approx21.2[\MeV]}\left.\frac{1}{E_c}\sqrt{t}\right|_{\beta=c=1}
\end{equation}

\begin{figure}[!ht]
  \begin{center}
    \includegraphics[height=4.25cm, keepaspectratio]{phd_calo/moliere}
  \end{center}
  \caption{\label{em_moliere}Angle de déflexion moyen des particules de la gerbe électromagnétique.}
\end{figure}

Comme illustré sur la figure \ref{em_moliere}, il est alors possible de définir le rayon de Molière $ R_M $ tel que au moins $ 90\% $ de l'énergie de la gerbe électromagnétique soit contenue dans la sphère de rayon $ 1\times R_M $ centrée sur l'axe de la gerbe et au moins $ 95\% $ de l'énergie de la gerbe électromagnétique soit contenue dans la sphère de rayon $ 2\times R_M $ centrée sur l'axe de la gerbe :
\begin{equation}
  R_M=\left<\theta\right>(x=X_0)\,X_0=\frac{E_s}{E_c}X_0
\end{equation}

Pour un milieu composite où $ w_i $ représente la proportion des différents matériaux, le rayon de Molière s'écrit : $ \frac{1}{R_M}=\frac{1}{E_s}\sum_i\frac{w_iE_{c,i}}{X_{0,i}} $.

A la conception d'un calorimètre électromagnétique, le rapport $ \frac{l}{R_M} $, où $ l $ est la taille des cellules, permet de caractériser les performances, plus il est petit, meilleur sera le calorimètre.

\subsection{Deux types de calorimètres}

Il existe deux type de calorimètres, les colorimètres homogènes et les calorimètres à échantillonnage.

Les premiers sont constitués d'un seul type de matériau qui fait office de milieu actif (= milieu de de détection) ainsi que de milieu absorbant. Toute l'énergie de la gerbe est mesurée. Ils sont généralement constitués de cristaux scintillants, c'est le cas du calorimètre du détecteur CMS.

Les seconds sont constitués de deux types de matériaux, le premier forme le milieu actif (= milieu de de détection) et le second forme le milieu absorbant. Une partie seulement de l'énergie de la gerbe est mesurée, elle est caractérisée par le rapport d'échantillonnage $ f_\textrm{échantillonnage} $ qui est le rapport de l'énergie déposée dans le milieu actif par l'énergie déposée dans l'absorbeur, c'est le cas du détecteur Atlas.\\

Citons quelques avantages des calorimètres à échantillonnage : i) En choisissant librement le matériau des absorbeurs, on peut construire des calorimètres très compacts. ii) Ils ont une bonne résolution spatiale. iii) Ils ont une bonne tenue aux radiations.

Et citons quelques inconvénients à échantillonnage : i) Seule une partie de l'énergie déposées est effectivement détecté dans les couches actives; généralement de quelques pour cent. ii) Des fluctuations dans l'échantillonnage entraînent généralement une résolution en énergie plus réduite que pour les homogènes par le terme $ \left.\frac{\sigma}{E}\right|_\textrm{échantillonnage}=\frac{a}{\sqrt{E}} $.

\newpage

\section{Le calorimètre électromagnétique à argon liquide}

Le calorimètre électromagnétique du détecteur Atlas est composé d'une partie tonneau et de deux parties bouchons aux extrémités. Ces dernières sont constituées d'une grande roue de précision et d'une petite roue. De même que les calorimètres vers l'avant (voir le chapitre précédent) et les bouchons du calorimètre hadronique, il s'agit de calorimètres à échantillonnage où le milieu actif est constitué d'électrodes de cuivre immergées dans de l'argon liquide avec un milieu absorbant est formé de plaques métalliques de plomb. Il s'agit d'une technologie robuste, déjà utilisée par les expériences SLD ou D$ \varnothing $, qui est bien maitrisée et qui dispose d'une bonne tenue dans le temps. L'abordeur ainsi que les électrodes sont pliées en accordéon. Cette particularité inédite confère au calorimètre électromagnétique du détecteur Atlas une herméticité parfaite en $ \phi $.

La partie tonneau du calorimètre électromagnétique pocède une couverture angulaire $ |\eta|<1.475 $ pour la pseudo-rapidité et $ 0<|\phi|<2\pi $ pour l'angle azimutal. La partie bouchons du calorimètre électromagnétique pocède une couverture angulaire $ 1.37<|\eta|<2.5 $ (resp. $ 2.5<|\eta|<3.2 $) pour la pseudo-rapidité dans la grande roue (resp. pour la petite roue). La région $ 1.37<|\eta|<1.52 $, qui est appelée \emph{crack}, est une région dédiée aux services.

\begin{figure}[!ht]
  \begin{center}
    \includegraphics[height=9.25cm, keepaspectratio]{phd_calo/electrodes}
  \end{center}
  \caption{\label{electrodes}Représentation schématique des électrodes du calorimètre électromagnétique du détecteur Atlas. Partie tonneau A et B (en haut), partie bouchon grande roue (en bas à droite) et petite roue (en bas à gauche). Les trois compartiments sont clairement visibles.}
\end{figure}

La tableau \ref{caloperf} rappelle la résolution en énergie ainsi que la résolution angulaire attendues des calorimètres du détecteur Atlas. A titre de comparaison, nous donnons la résolution en énergie du calorimètre homogène à cristaux de tungstate de plomb du détecteur CMS : $ \frac{\sigma(E)}{E}=\frac{3\%}{\sqrt{E}}\oplus0.5\% $. Celle-ci est, par conception, légèrement meilleure que celle du détecteur Atlas, néanmoins, grâce à sa fine segmentation et son détecteur de pieds de gerbes, le calorimètres électromagnétique du détecteur Atlas dispose d'une très bonne résolution angulaire. Il est tout particulièrement adapté à la recherche du boson de Higgs dans les canaux $ H\to\gamma\gamma $ et $ H\to ZZ^{(*)}\to4l $ où encore à la recherche d'hypothétiques bosons lourds tels que les $ W' $ ou les $ Z' $ qui se désintègrent en leptons de haute énergie.

\begin{table}[!ht]
  \begin{center}

    \begin{tabular}{|l|l|c|c|}
      \hline
      \hline
        \small Sous-détecteur & \small Résolution en énergie & \small Résolution angulaire & \small Non linéarité\\
      \hline
        \small Calo. électromagnétique & $ \frac{\sigma_E}{E}=\frac{10\%}{\sqrt{E}}\oplus0.7\% $ & $ \frac{\sigma_\phi}{E}=\frac{50mrad}{\sqrt{E}} $ & $ <0.5\% $\\
      \hline
        \small Calo. hadronique & $ \frac{\sigma_E}{E}=\frac{50\%}{\sqrt{E}}\oplus3\% $ (tonneau) & - & $ <2.0\% $\\
                                & $ \frac{\sigma_E}{E}=\frac{100\%}{\sqrt{E}}\oplus10\% $ (bouchons) & - & $ <2.0\% $ \\
      \hline
    \end{tabular}

  \end{center}
  \caption{\label{caloperf}Performances attendues des calorimètres du détecteur Atlas où l'énergie $ E $ et l'impulsion transverse $ p_T $ sont exprimés en $ \MeV $.}
\end{table}

\subsection{Géométrie}

Le calorimètre électromagnétique du détecteur Atlas est partagé en trois compartiments S1, S2 et S3. Ils sont disposés de l'intérieur vers l'extérieur et possèdent une granularité en pseudo-rapidité et en angle azimutal décroissante.

\vspace{-0.3cm}

\paragraph{Le premier compartiment, S1}\hspace{-0.4cm}, est très finement segmenté. La taille typique des cellules est $\Delta\eta\times\Delta\phi=0.003\times0.018 $ d'où son surnom de \og \emph{strips} \fg\,en anglais, c'est-à-dire  \og bandes \fg. Il permet de mesurer précisément la position des objets électromagnétiques ce qui s'avère utile pour l'identification des photons ainsi que pour la réjection des $ \pi^0 $ qui se désintègrent en paires de photons angulairement très proches.

\vspace{-0.3cm}

\paragraph{Le second compartiment, S2}\hspace{-0.4cm}, est huit fois moins segmenté suivant $ \eta $ que le compartiment S1. La taille typique des cellules est $\Delta\eta\times\Delta\phi=0.025\times0.025 $. Il permet de mesurer les dépôt d'énergie du corps des gerbes électromagnétiques.

\vspace{-0.3cm}

\paragraph{Le troisième compartiment, S3}\hspace{-0.4cm}, est deux fois moins segmenté suivant $ \eta $ que le compartiment S2. La taille typique des cellules est $\Delta\eta\times\Delta\phi=0.05\times0.025 $. Il permet de mesurer les dépôt d'énergie des fin de gerbes électromagnétiques et permet également de caractériser la fuite vers le calorimètre hadronique.\\

La figure \ref{calodetails} montre une représentation schématique des trois compartiments et de la segmentation en pseudo-rapidité et en angle azimutal du calorimètre électromagnétique du détecteur Atlas.

\begin{figure}[!ht]
  \begin{center}
    \includegraphics[height=7.3cm, keepaspectratio]{phd_calo/calo1}
  \end{center}
  \caption{\label{calodetails}Représentation schématique des trois compartiments et de la segmentation en pseudo-rapidité et en angle azimutal du calorimètre électromagnétique du détecteur Atlas.}
\end{figure}

Le colorimètre électromagnétique est également doté d'un pré-échantillonneur, le PS. La taille typique des cellules est $ \Delta\eta\times\Delta\phi=0.025\times0.1 $. Son but est de mesurer la perte d'énergie dans les matériaux situés en amont du calorimètre et d'effectuer des corrections géométriques dues à la distribution inhomogène de matière. Sa couverture angulaire est de $ |\eta|<1.8 $.\\

\vspace{-0.25cm}

La partie tonneau du calorimètre électromagnétique est constituée de deux types d'électrode, voir figure \ref{electrodes} (haut). L'électrode A a une couverture angulaire $ |\eta|<0.8 $ sur une épaisseur qui s'étend entre $ 22X_0 $ et $ 30X_0 $ et l'électrode B a une couverture angulaire $ 0.8<|\eta|<1.3 $ sur une épaisseur qui s'étend entre $ 24X_0 $ et $ 30X_0 $. La quantité de matière traversée par les particules augmente avec la pseudo-rapidité. C'est pourquoi la taille des différents compartiments change avec la pseudo-rapidité afin que les fractions d'énergie déposées dans les différents compartiments restent constantes. De-même, l'épaisseur d'absorbeur est plus grand pour l'électrode A que pour l'électrode B. La partie bouchons du calorimètre électromagnétique est constituée de deux roues, voir figure \ref{electrodes} (bas). L'électrode de la grande roue a une couverture angulaire $ 1.477<|\eta|<2.5 $ sur une épaisseur qui s'étend entre $ 24X_0 $ et $ 38X_0 $ et l'électrode de la petite roue a une couverture angulaire $ 2.5<|\eta|<3.2 $ sur une épaisseur qui s'étend entre $ 26X_0 $ et $ 36X_0 $. Ces dimentionnements ont été déterminés afin de pouvoir contenir les électrons issus de $ W' $ ou de $ Z' $.

Comme la densité de particules est à peu près constante sur $ \eta\lesssim3 $, une segmentation des cellules en pseudo-rapidité a été adoptée afin de garantir une bonne uniformité de l'électronique d'acquisition. La taille des cellules est contitionnée par le rayon de molière, voir tableau \ref{matcalo}. Le tableau \ref{granilarite} montre le détail de la granularité, en fonction de la pseudo-rapidité, du calorimètre électromagnétique tonneau et des calorimètres électromagnétiques bouchons.

\subsection{Performances}

Les performances du calorimètre électromagnétique ont été mesurées à l'aide de faisceaux de test, à l'aide de données cosmiques et à l'aide des premières données. De façon générique, la résolution en énergie s'écrit sous la forme :
\begin{equation}
  \label{formule_resolution}\frac{\sigma(E)}{E}=\frac{a}{\sqrt{E}}\oplus\frac{b}{E}\oplus c
\end{equation}

\vspace{-0.15cm}

\noindent où $ a $ est le terme d'échantillonnage (ou terme stochastique) déjà mentionné, $ b $ est un facteur de bruit électronique et d'empilement et $ c $ est le terme constant qui domine à haute énergie. Ce dernier résulte de plusieurs effets comme les non-uniformité de la géométrie, les fluctuations de température dans l'argon liquide, etc\dots\,Des contraintes fortes ont été posée afin de maximiser le potentiel de découverte du boson de Higgs via les canaux $ H\to\gamma\gamma $ et $ Z\to ZZ^{(*)}\to4l $ : $ a\sim10\%[\sqrt{\GeV}] $, $ b\sim400\MeV $ à la luminosité nominale et $ c<1\% $.\\

\vspace{-0.25cm}

Les études réalisées sur faisceaux de test fournissent $ a\approx10\%[\sqrt{\GeV}] $ et $ c\approx0.2\% $ pour le tonneau et $ a\approx11,4\%[\sqrt{\GeV}] $ et $ c\approx0.35\% $ pour les bouchons. Ces résultats sont en accord avec les spécifications du détecteur Atlas.

La mesure de la masse invariante de paires d'électrons issus de bosons $ Z $ avec les données 2010 fournissent $ c\approx1.2\pm0.1\textrm{(stat.)}\pm0.3\textrm{(syst.)}\% $ pour le tonneau, $ c\approx1.8\pm0.4\textrm{(stat.)}\pm0.2\textrm{(syst.)}\% $ pour la grande roue des bouchons et $ c\approx3.3\pm0.2\textrm{(stat.)}\pm1.0\textrm{(syst.)}\% $ pour la petite roue des bouchons. Comme l'inter-calibration des régions en $ \eta $ et en $ \phi $ n'était pas possible, à cause de la statistique, les nombres sont légèrement supérieurs à ceux attendus.

La linéarité de la réponse a été mesurée sur un module avec des faisceaux de test. La non-linéarité est inférieure à $ 1\% $ sur la gamme d'énergie qui s'étend de $ 15\GeV $ à $ 180\GeV $. Elle fut également mesurée avec des faisceaux de test combinés en ajoutant de la matière afin de reproduire les conditions réelles. Elle est inférieure à $ 1\% $ sur la gamme d'énergie qui s'étend de $ 15\GeV $ à $ 180\GeV $. Finalement, la non-linéarité est inférieure à $ 0.5\% $ (resp. inférieure à $ 2\% $) sur la gamme d'énergie qui s'étend de $ 20\GeV $ à $ 180\GeV $ pour le tonneau (resp. sur la gamme d'énergie supérieure à $ 40\GeV $ pour les bouchons).

\begin{table}[!ht]
  \begin{center}

    \begin{tabular}{|c|cc|cc|}
      \hline
      \hline
        \small       & \multicolumn{2}{c|}{ Tonneaux }                       & \multicolumn{2}{c|}{ Bouchons }                        \\
      \hline
      \hline
        Compartiment & Granularité                   & Couverture            & Granularité                   & Couverture             \\
                     & $\Delta\eta\times\Delta\phi $ &                       & $\Delta\eta\times\Delta\phi $ &                        \\
      \hline
        PS           & $ 0.025\times0.1 $            & $ |\eta|<1.52 $       & $ 0.025\times0.1 $            & $ 1.5<|\eta|<1.8 $     \\
      \hline
        S1           & $ 0.025/8\times0.1 $          & $ |\eta|<1.40 $       & $ 0.050\times0.1 $            & $ 1.375<|\eta|<1.425 $ \\
                     & $ 0.025\times0.025 $          & $ 1.40<|\eta|<1.475 $ & $ 0.025\times0.1 $            & $ 1.425<|\eta|<1.5 $   \\
                     &                               &                       & $ 0.025\times0.1 $            & $ 1.5<|\eta|<1.8 $     \\
                     &                               &                       & $ 0.025\times0.1 $            & $ 1.8<|\eta|<2.0 $     \\
                     &                               &                       & $ 0.025\times0.1 $            & $ 2.0<|\eta|<2.4 $     \\
                     &                               &                       & $ 0.025\times0.1 $            & $ 2.4<|\eta|<2.5 $     \\
                     &                               &                       & $ 0.1\times0.1 $              & $ 2.5<|\eta|<3.2 $     \\
      \hline
        S2           & $ 0.025\times0.025 $          & $ |\eta|<1.40 $       & $ 0.050\times0.025 $          & $ 1.375<|\eta|<1.425 $ \\
                     & $ 0.075\times0.025 $          & $ 1.40<|\eta|<1.475 $ & $ 0.025\times0.025 $          & $ 1.425<|\eta|<2.5 $   \\
                     &                               &                       & $ 0.050\times0.025 $          & $ 2.5<|\eta|<3.2 $     \\
      \hline
        S3           & $ 0.050\times0.025 $          & $ |\eta|<1.35 $       & $ 0.050\times0.025 $          & $ 1.5<|\eta|<2.5 $     \\
      \hline
    \end{tabular}

  \end{center}
  \caption{\label{granilarite}Détail de la granularité, en fonction de la pseudo-rapidité, du calorimètre électromagnétique tonneau et des calorimètres électromagnétiques bouchons.}
\end{table}

\section{L'électronique}

La figure \ref{electronique} montre le schéma simplifié de l'électronique de lecture des cellules du calorimètre électromagnétique. Nous constatons la présence de trois sous-systèmes. Le premier sous-systèmes est situé dans le cryostat, il est constitué des cellules et ne fait intervenir que des composants passifs. Le second sous-systèmes est situé sur la paroi des cryostats dans des boîtiers, les FEC (Front End Crate), il contient l'électronique nécessaire pour la mise en forme des signaux, pour la mises en places des signaux servant au déclenchement et pour la calibration électronique. Enfin, le troisième sous-systèmes est situé à l'extérieur du détecteur Atlas, il contient l'électronique nécessaire pour la détermination de l'énergie non calibrée déposée dans chaque cellule ainsi que pour le système de déclenchement L1. Le second sous-systèmes est souvent qualifié de \emph{front-end} et le troisième sous-systèmes est souvent qualifié de \emph{back-end}.

\begin{figure}[!p]
  \begin{center}
    \includegraphics[width=0.9\linewidth, keepaspectratio]{phd_calo/LArReadout}
  \end{center}
  \caption{\label{electronique}Schéma simplifié de l'électronique de lecture des cellules du calorimètre électromagnétique. Du bas vers le haut, électronique froide située dans le cryostat, électronique chaude situé dans le détecteur et électronique chaude située en dehors du détecteur Atlas.}
\end{figure}

\subsection{L'électronique froide}

La figure \ref{cellule1} montre le schéma des électrodes du calorimètre électromagnétique. Elles sont placées entre les couches des absorbeurs et sont constituées de trois électrodes en cuivre séparées par des couches de polyimide et de kapton en nid l'abeille. L'électrode centrale est chargée de collecter le signal par effet capacitif alors que les deux électrodes périphériques sont reliées à une haute tension d'environ $ 2000V $. Les particules incidentes ionisent l'argon liquide et le champ électrique fait migrer les électrons et les ions afin de créer un courant électrique sur l'électrode centrale.

Le signal obtenu est triangulaire, le temps de montée est de l'ordre du nanoseconde (contribution des électrons) alors que le temps de descente est de l'ordre de $ 400ns $ pour le tonneau, entre $ 200ns $ et $ 500ns $ pour les bouchons et entre $ 60ns $ et $ 115ns $ pour les calorimètres vers l'avant (contribution des ions). L'amplitude du signal et proportionnelle à l'énergie, elle est entre $ 2\mu A\,\GeV^{-1} $ et $ 3\mu A\,\GeV^{-1} $ pour le calorimètre électromagnétique et entre $ 1\mu A\,\GeV^{-1} $ et $ 3\mu A\,\GeV^{-1} $ pour les calorimètres vers l'avant.

Une cellule est généralement composée de plusieurs électrodes, des cartes sommatrices, n'utilisant que des composants discrets, sont également présentes à l'intérieur du cryostat. Le signal ainsi sommé est envoyé à l'extérieur, pas l'intermédiaire de traversées (feed through), vers l'électronique \emph{front-end}.

\begin{figure}[!ht]
  \begin{center}
    \includegraphics[width=0.5\linewidth, keepaspectratio]{phd_calo/cellule1}
  \end{center}
  \caption{\label{cellule1}Schéma d'une électrode du calorimètre électromagnétique.}
\end{figure}

\subsection{L'électronique \emph{front-end}}

Les signaux ce chaque cellule sont envoyés hors du cryostats dans les FEC (Front End Crate). Ceux-ci contiennent trois type de cartes électroniques :

\vspace{-0.25cm}

\paragraph{Les FEB (Front End Board)} Ces cartes, voir figure \ref{FEBetROD} (a), recueillent les signaux de 128 canaux. Elles effectuent plusieurs opérations : i) Les signaux sont pre-amplifiées avec un LNA (Low Noise Amplifier) et sont divisés en trois gains de rapports respectifs $ 1/9.9/93 $ afin de disposer d'une large dynamique. ii) Comme la durée de vie d'un signal est supérieur à la fréquence de croisement des faisceaux du LHC, afin de limiter les effets de l'empilement, une mise en forme est effectuée par des filtres passifs analogiques de type $ CR-(RC)^2 $. Le signal obtenu est d'air nul, sa largeur en temps est approximativement deux fois plus petite que la largeur en temps du signal triangulaire mais l'amplitude maximale reste constante. iii) En attendant la décision du système de déclenchement L1CaloEM ($ <25\mu s $), les signaux mis en forme sont envoyés dans des tampons capacitifs avant d'être digitalisés à l'aide de convertisseurs analogique/numérique $ 12 $ bits\footnote{Le signal $ s $ est représenté par un nombre entier $ 12 $ bits c'est-à-dire $ 0\le s[ADC]\le\underbrace{2^{12}-1}_{4095} $ où $ ADC $ signifie \vspace{-0.5cm} en anglais \emph{Analog-to-Digital Converter}.}. Afin d'économiser des ressources matérielles, le signal est échantillonné avec une conversion toute les $ 25ns $. Seuls $ 5 $ échantillons (resp. jusqu'à $ 32 $ échantillons), autour du maximum du signal, sont conservés pour la physique (resp. pour la calibration) et envoyés à l'électronique \emph{back-end} à l'aide des transmetteurs optiques déjà cités au chapitre précédent, les OTX (Optical Transmiter).

La figure \ref{feb} montre le schéma simplifier d'une FEB et la figure \ref{pulses} montre le signal avant mise en forme, après mise en forme et après digitalisation pour des muons cosmiques dans le tonneau (a) et dans un bouchon (b).

\begin{figure}[!ht]
  \begin{center}
    \includegraphics[width=0.75\linewidth, keepaspectratio]{phd_calo/feb}
  \end{center}
  \caption{\label{feb}Schéma simplifier d'une FEB (Front End Board).}
\end{figure}

\begin{figure}[!ht]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[width=0.48\linewidth, keepaspectratio]{phd_calo/pulse1}
    &&
    \includegraphics[width=0.48\linewidth, keepaspectratio]{phd_calo/pulse2}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{pulses}Signal avant mise en forme, après mise en forme et après digitalisation pour des muons cosmiques dans le tonneau (a) et dans un bouchon (b).}
\end{figure}

\paragraph{Les \emph{Tower Builders}} Ces carte recueillent, à partir des FEB, les signaux pré-amplifiés sans mise en forme de chaque cellule. Pour les calorimètres électromagnétiques tonneau et bouchons, elles construisent des tours de déclenchement en sommant les signaux de huit cellules contigües alors que pour les calorimètres vers l'avant ainsi que pour les calorimètres hadroniques bouchons, aucune somme n'est effectué, on parle plutôt de \emph{Tower Trigger}. Les signaux obtenus sont directement envoyés à l'électronique \emph{back-end}.

\paragraph{Les \emph{Calibration Board}} La chaîne électronique d'acquisition contribue significativement à la dégradation du terme constant qui intervient dans le formule de la résolution en énergie, formule \ref{formule_resolution}. Afin de réduire cette contribution, un système de calibration de la réponse de chacune des cellules a été mis en place. Des cartes de calibration permettent l'injection, au travers de résistances $ R_\textrm{inj} $, de signaux très proches des signaux triangulaires de ionisation. Celui-si est le la forme $ V_\textrm{cali}(t)=V_0\,e^{-\frac{t}{\tau}} $, où $ \tau $ est le temps de décroissance du signal. Il est généré à l'aide de convertisseurs numérique/analogique. Les signal passe alors chaîne électronique d'acquisition et permet d'établir des constantes d'étalonnage.

Le figure \ref{cellule2} montre le schéma simplifié de l'électronique de calibration située autour d'une cellule du calorimètre électromagnétique.

\begin{figure}[!ht]
  \begin{bigcenter}
    \includegraphics[width=0.9\linewidth, keepaspectratio]{phd_calo/cellule2}
  \end{bigcenter}
  \caption{\label{cellule2}Schéma simplifié de l'électronique de calibration située autour d'une cellule du calorimètre électromagnétique, électronique froide (violet et rouge) et électronique chaude.}
\end{figure}

Au total, l'électronique \emph{front-end} contient $ 58 $ FEC, $ 1524 $ FEB pour traiter environ $ 196000 $ cellules en moins de $ 10\mu s $.

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=0.775\linewidth, keepaspectratio]{phd_calo/FEC}
  \end{bigcenter}
  \caption{Photographie d'une extrémité du cryostat du calorimètre électromagnétique tonneau, les FEC (Front End Crate) sont clairement visibles sur la circonférence du cryostat :-).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=0.775\linewidth, keepaspectratio]{phd_calo/eleccalo}
  \end{bigcenter}
  \caption{Représentation en image de synthèse d'un FEC (Front End Crate).}
\end{figure}

\begin{figure}[!ht]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \begin{minipage}{0.475\linewidth}
      \includegraphics[width=\linewidth, keepaspectratio]{phd_calo/FEB}
    \end{minipage}
    &&
    \begin{minipage}{0.475\linewidth}
      \includegraphics[width=\linewidth, keepaspectratio]{phd_calo/ROD}
    \end{minipage}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{FEBetROD}Photographie d'une FEB (Front End Board) (a) et photographie d'un ROD (Read Out Driver) (b).}
\end{figure}

\subsection{L'électronique \emph{back-end}}

Située à l'extérieur du détecteur Atlas dans une caverne annexe, l'électronique \emph{back-end} contient essentiellement deux sous-systèmes. Le premier, qui reçoit les signaux issus des FEB dans des boîtiers, les ROC (Readout Crate), effectue la reconstruction de l'énergie déposée dans chacune des cellules. Le second, qui reçoit les signaux issus des \emph{Tower Builders}, réalise l'implémentation du système de déclenchement L1CaloEM à une fréquence pouvant atteindre $ 75kHz $. Dans ce qui suit, nous allons décrire le fonctionnement du premier sous-système.

\paragraph{Les ROD \emph{Read Out Driver}} Ces cartes, voir figure \ref{FEBetROD} (b), recueillent les signaux de 16 FEB. Construites à base de DSP (Digital Signal Processor), leur objectif est de déterminer l'énergie des cellules à partir du signal échantillonné. La méthode du filtrage optimal est utilisée, elle permet de retrouver l'amplitude maximale du signal $ A $ ainsi que le temps de décroissance du signal $ \tau $ :
\begin{equation}
  \phantom{\tau}A=\sum_i^{N_{sample}}a_i(s_i-p)
\end{equation}
\begin{equation}
  \tau A=\sum_i^{N_{sample}}b_i(s_i-p)
\end{equation}

où $ N_{sample} $ est le nombre d'échantillons du signal, $ s_i $ est la valeur exprimée en $ ADC $ du i$ ^\textrm{ième} $ échantillon, $ p $ est la valeur du piedestal exprimée en $ ADC $ de la cellule et $ a_i $ et $ b_i $ sont les c\oe fficients de filtrage optimal (OFC). Comme l'erreur sur $ \tau $ est inversement proportionnelle à $ A $, le temps est calculé seulement pour les canaux au dessus d'un seuil d'énergie donnée. De plus, un $\chi^2 $ simplifie, ignorant la corrélation entre les échantillons, est calculé pour comparer la forme des signaux mesurées avec la forme de signaux idéals :
\begin{equation}
  \chi^2=\sum_i^{N_{sample}}(s_i-p-A(g_i-\tau g'_i))^2
\end{equation}

où $ g_i $ et $ g'_i $ sont respectivement le signal idéal normalisé et la dérivée du signal idéal normalisé. Les valeurs de $ p $, $ a_i $ et $ b_i $ sont déterminés pour chaque cellule grace à l'électronique de calibration (voir la section suivante).

Une fois l'amplitude maximale du signal reconstruite, il est possible de reconstruire l'énergie dans la cellule $ E_\textrm{cellule} $ :
\begin{equation}
  \boxed{E_\textrm{cellule}=F_{\mu A\to\MeV}F_{DAC\to\mu A}\frac{M_{cali}}{M_{phys}}\sum_j^{M_{rampe}}R_j\left[\underbrace{\sum_i^{N_{sample}}a_i(s_i-p)}_{A}\right]}\label{energy_reco}
\end{equation}

où :
\begin{itemize}
  \item $ F_{\mu A\to\MeV} $ est la constante qui effectue la conversion $ \mu A $ vers $ \MeV $.
  \item $ F_{DAC\to\mu A} $ est la constante qui effectue la conversion $ DAC $ vers $ \mu A $.
  \item $ M_{cali}/M_{phys} $ est un facteur de correction qui tient compte des différences entre le signal physique et le signal de calibration.
  \item $ R_j $ est la constante qui effectue la conversion $ ADC $ vers $ DAC $ pour les différents gains.
  \item $ A $ est l'amplitude maximale du signal en $ ADC $.\\
\end{itemize}

Le c\oe fficient $ F_{\mu A\to\MeV} $ est établi à partir de la simulation, le c\oe fficient $ F_{DAC\to\mu A} $ fait intervenir la valeur de la résistance d'injection $ R_{inj} $, le c\oe fficient $ M_{cali}/M_{phys} $ à été établi à l'aide de faisceaux de test, pour les calorimètres vers l'avant, les contraintes de performances sont plus souples et $ M_{cali}/M_{phys}=1 $, les c\oe fficients $ R_j $ sont obtenus pour chaque cellule à partir de la pente du gain en utilisant les signaux de calibration (voir la section suivante), les piedestaux sont obtenus pour chaque cellule en lisant les FEB sans signal (voir la section suivante) et enfin les OFC sont extraits pour chaque cellule à partir de la forme des signaux de calibration et à partir de la corrélation entre les différents échantillons du signal de calibration en utilisant un multiplicateur de Lagrange (voir la section suivante).\\

Remarque : La reconstruction de l'énergie déposée dans chacune des cellules peut être indifféremment effectuée par les ROD ou par le logiciel \emph{LAr offline}.

\section{Calibration électronique}

Dans cette section, je vais décrire la procédure de calibration électronique des calorimètres à argon liquide, c'est-à-dire, l'extractions des constantes nécessaires à la reconstruction de l'énergie déposée dans chacune des cellules. De septembre 2009 jusqu'à février 2010, j'ai eu la charge de la validation des campagnes de calibration pour les bouchons du calorimètre électromagnétique et à partir du printemps 2010, j'ai développé une partie des outils utilisés actuellement pour la validation des campagnes de calibration.

\subsection{Campagnes de calibration}

Des campagnes de calibration ont lieu plusieurs fois par semaine. Leur objectif et de déterminer et contrôler les constantes nécessaires à la reconstruction de l'énergie déposée dans chacune des cellules. Pour ce faire, l'électronique de calibration, présentée dans la section précédente, est utilisée. Une campagne de calibration est composée d'un lot de prises de données, ou \emph{run}, spécifiques, soit typiquement : i) des \emph{runs} de piédestaux. ii) des \emph{runs} de délais. iii) des \emph{runs} de rampes. Il existe deux type de campagnes, les campagnes \emph{daily} et les campagnes \emph{weekly}. Dans les premières, seuls des runs de piédestaux et de rampes sont effectués en ne concevant que 7 valeurs après échantillonnage des signaux tous les $ 25ns $. Dans les secondes, les trois type des \emph{runs} sont effectués en concervant 32 valeurs après échantillonnage des signaux tous les $ 25ns $.

\newpage

Décrivons le contenu de chacun des \emph{runs} :

\paragraph{Les \emph{runs} de piédestaux} Au total, 3000 événements sont enregistrés. Les FEB sont lues sans qu'il n'ait de signal injecté par l'électronique de calibration. Il est alors possible de calculer le piédestal moyen ($ p $ dans l'équation \ref{energy_reco}), le RMS (bruit) et l'auto-corrélation en temps entre deux échantillons, voir figure \ref{calib_var}. Cette dernière quantité intervient dans la détermination des OFC ($ a_i $ dans l'équation \ref{energy_reco}).

\paragraph{Les \emph{runs} de délais} Au total, 200 événements sont enregistrés. Les FEB sont lues après injection des signaux de calibration. Un délai est introduit entre l'injection et l'acquisition. Vingt-quatre valeurs sont générées toutes les $ 25ns $, c'est-à-dire, vingt-quatre fois plus que pour un signal échantillonné standard. Il est alors possible de calculer\footnote{Une correction sur le couplage capacitif est appliquée. En effet, celui-ci peut entrainer jusqu'à $ 8\% $ de perte sur le courant injecté dans les cellules dans le premier compartiment.} le signal moyen et le RMS. La courbe de réponse de la cellule, ou \emph{pulse}, est reconstruite ultérieurement et le piedestal est soustrait, voir figure \ref{pulses}.

\paragraph{Les \emph{runs} de ramps} Au total, 200 événements sont enregistrés. L'objective est de mesurer la réponse de chaque cellule en fonction du courant injecté pour les trois gains, voir figure \ref{calib_var}. L'amplitude maximale moyenne est reconstruite$ ^\textrm{\scriptsize{3}} $ ultérieurement. Il est alors possible de calculer la relation linéaire entre les $ ADC $ les $ DAC $ ($ R_j $ dans l'équation \ref{energy_reco}).

\begin{figure}[!ht]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[width=0.48\linewidth, keepaspectratio]{phd_calo/pedestals}
    &&
    \includegraphics[width=0.48\linewidth, keepaspectratio]{phd_calo/noises}
    \\
    (a) && (b)
    \\
    \includegraphics[width=0.48\linewidth, keepaspectratio]{phd_calo/autocorr}
    &&
    \includegraphics[width=0.48\linewidth, keepaspectratio]{phd_calo/ramp}
    \\
    (c) && (d)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{calib_var}Piédestal (a) et bruit (b) en fonction du canal (tonneau EM A, FT=1 et SL=10, gain M), auto-corrélation en fonction de l'échantillon pour un canal (c) et ADC en fonction DAC pour un canal (d) (tonneau EM A, FT=1, SL=10 et CH=127, gain M).}
\end{figure}

\newpage

\subsection{C\oe fficients de filtrage optimal}\label{OFC_formulae}

Présentons rapidement la méthode des c\oe fficients de filtrage optimal. Le signal reconstruit dans l'argon liquide peut être paramétré de la façon suivante :
\begin{eqnarray}
  S(t)&    =    & A\,g(t-\tau)+n(t)\\
      & \approx & A\left\{g(t)-\tau g'(t)\right\}+n(t)\label{lar_signal_approx}
\end{eqnarray}

où $ A $ est l'amplitude maximale du signal, $ \tau $ le temps de décroissance du signal et $ g_i $ et $ g'_i $ sont respectivement le signal idéal normalisé et la dérivée du signal idéal normalisé. Le terme $ n(t) $ est associé aux piédestaux. L'équation \ref{lar_signal_approx} discrétisée ($ t\to k\left\{\Delta t=0.25ns\right\} $) s'écrit :
\begin{equation}
  S_k=A(g_k-\tau g'_k)+n_k\label{lar_signal_approx_discr}
\end{equation}

Par définition, $ \left<n_k\right>=0 $ et $ n_in_j\equiv R_{ij} $ correspond la fonction d'auto-corrélation des piédestaux. On introduit les paramétrisations suivantes : 
\begin{equation}
  \left<\sum_{k=1}^{N}a_kS_k\right>\equiv A\hspace{1.0cm}\textrm{et}\hspace{1.0cm}\left<\sum_{k=1}^{N}b_kS_k\right>\equiv A\tau
\end{equation}

Afin d'être compatible avec la définition \ref{lar_signal_approx_discr}, il faut imposer les contraintes suivantes :
\begin{equation}
  \begin{array}{ccc}
    \sum_{k=1}^{N}a_kg_k=+1 & \textrm{\hspace{0.5cm}et\hspace{0.5cm}} & \sum_{k=1}^{N}a_kg'_k=0\\
    \\
    \sum_{k=1}^{N}b_kg_k=0 & \textrm{\hspace{0.5cm}et\hspace{0.5cm}} & \sum_{k=1}^{N}b_kg'_k=-1
  \end{array}
\end{equation}

Les c\oe fficient $ a_i $ et $ b_i $ sont obtenus à partir de la méthode des multiplicateurs de Lagrange :
\begin{eqnarray}
  0 & = & \frac{\partial}{\partial a_k}\left\{\frac{1}{2}\sum_{ij}a_ia_jR_{ij}-\lambda\sum_ia_ig_i-\mu\sum_ia_ig'_i\right\}\nonumber\\
    & = & \sum_ia_iR_{ik}-\left(\lambda\,g_k+\mu\,g'_k\right)\Rightarrow \boxed{\underbrace{a_i=\lambda\sum_kR^{-1}_{ik}g_k+\mu\sum_kR^{-1}_{ik}g'_k}_{\textrm{équation de pic}}}
\end{eqnarray}
et :
\begin{eqnarray}
  0 & = & \frac{\partial}{\partial b_k}\left\{\frac{1}{2}\sum_{ij}b_ib_jR_{ij}-\rho\sum_ib_ig_i-\sigma\sum_ib_ig'_i\right\}\nonumber\\
    & = & \sum_ib_iR_{ik}-\left(\rho\,g_k+\sigma\,g'_k\right)\Rightarrow \boxed{\underbrace{b_i=\rho\sum_kR^{-1}_{ik}g_k+\sigma\sum_kR^{-1}_{ik}g'_k}_{\textrm{équation de temps}}}
\end{eqnarray}
où, $ \lambda\equiv+\frac{Q_2}{\Delta} $, $ \mu\equiv-\frac{Q_3}{\Delta} $, $ \rho\equiv+\frac{Q_3}{\Delta} $, $ \sigma\equiv-\frac{Q_1}{\Delta} $ avec :
\begin{equation}
  \begin{array}{ccc}
    Q_1=\sum_{ij}g_ig_jR^{-1}_{ij} & \textrm{\hspace{0.5cm}et\hspace{0.5cm}} & Q_3=\sum_{ij}g_ig'_jR^{-1}_{ij}\\
    \\
    Q_2=\sum_{ij}g'_ig'_jR^{-1}_{ij} & \textrm{\hspace{0.5cm}et\hspace{0.5cm}} & \Delta=Q_1Q_2-Q^2_3
  \end{array}
\end{equation}

Nous voyons comment interviennent les \emph{runs} d'auto-corrélation ainsi que les \emph{runs} de délais dans la détermination des c\oe fficients de filtrage optimal.

\subsection{Procédure de validation}

Il existe une base de donnée qui contient les valeurs courantes des constantes de calibration pour chacune des cellules. La procédure de validation s'effectue en 4 étapes : i) Une campagne de calibration, \emph{daily} ou \emph{weekly}, est démarrée à partir de la salle de contrôle du détecteur Atlas. ii) La reconstruction des runs de calibration est effectuée automatiquement. iii) Une campagne de référence est sélectionnée. Il s'agit généralement de la campagne \emph{weekly} présente dans la base de données sauf si les conditions (champs magnétiques, température, etc\dots) ont changées. iv) Pour chaque cellule et pour chaque FEB (128 cellules), les constantes de calibration de la campagne courante sont comparées avec les constantes de calibration de la campagne de référence. Si les différences, absolues ou relatives selon les cas, dépassent un certain seuil, voir tableau \ref{seuils}, alors, la cellule est identifiée comme déviante. Le responsable de la validation de la campagne de calibration doit essayer de comprendre pourquoi et doit vérifier si la déviation est durable dans le temps. Pour les cellules réellement problématiques, l'électronique de lecture (\emph{deadReadout}) et/ou de calibration (\emph{deadCalib}) est le plus souvent en cause.

La procédure de validation permet ainsi de suivre la stabilité des constantes de calibration, de déterminer si une mise à jour de la base de données des constantes de calibration est nécessaire et également de vérifier si il existe de nouvelles cellules défectueuses.\\

La stabilité des constantes de calibration a été étudiée. Les figures \ref{stabilite1} à \ref{stabilite2} montrent la stabilité des piédestaux, du bruit, des délais et des rampes, période 2009-2010, pour le calorimètre électromagnétique tonneau. Les piédestaux (resp. le bruit) sont stables, la déviation est inférieure à $ 0.1ADC $ (resp $ 0.02ADC $). Pour les délais et les rampes, nous observons des décalages, $ +0.1 $ pour les délais et $ -0.1 $ pour les rampes. Il sont dus à la désactivation fréquente des aimants toroïdale et solénoïdal, en effet, les champs induisent des courants dans les inductances des cartes électroniques dont il faut tenir compte.

\begin{table}[!p]
  \begin{bigcenter}
  \small{

    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|}
      \hline
      \hline
        & Gains & Ped & Noise & Ped & Noise & Auto & Auto & Delay & Delay & Ramp & Ramp \\
        & & & & FEB & FEB & & FEB & & FEB & & FEB \\
        & & $ [ADC] $ & $ [ADC] $ & $ [ADC] $ & $ [ADC] $ & $ abs $ & $ abs $ & \hbox{$\,^0\!/_{00}$} & \hbox{$\,^0\!/_{00}$} & $ rel $ & $ rel $ \\
      \hline
        EMB & H & 1.5 & 0.8 & 0.2 & 0.05 & 0.05 & 0.04 & 10.0 & 5.0  & 0.015  & 0.004 \\
            & L & 0.9 & 0.2 & all & all  & all  & all  & 4.0  & all  & 0.004  & all   \\
            & M & 0.9 & 0.2 &     &      &      &      & 4.0  &      & 0.004  &       \\
      \hline
        EMEC & H & 1.5 & 0.8 & 1.5 & 1.0  & 0.05 & 0.02 & 6.0  & 2.0  & 0.006  & 0.001 \\
             & L & 0.9 & 0.2 & all & all  & all  & all  & 1.5  & 0.6  & 0.004  & all   \\
             & M & 0.9 & 0.2 &     &      &      &      & 1.5  & 0.6  & 0.004  &       \\
      \hline 
        FCAL & H & 1.5 & 0.8 & 1.5 & 1.0  & 0.05 & 0.02 & 5.0  & 3.0  & 0.004  & 0.001 \\
             & L & 0.9 & 0.2 & all & all  & all  & all  & 1.0  & all  & 0.0015 & all   \\
             & M & 0.9 & 0.2 &     &      &      &      & 1.0  &      & 0.0015 &       \\
      \hline
        HEC & H & 5.0 & 4.0 & 5.0 & 4.0  & 0.05 & 0.02 & 15.0 & 10.0 & 0.02  & 0.001  \\
            & L & 1.3 & 0.6 & all & all  & all  & all  & 10.0 & all  & 0.015 & all    \\
            & M & 1.0 & 0.2 &     &      &      &      & 10.0 &      & 0.015 &        \\
      \hline
    \end{tabular}

  }
  \end{bigcenter}
  \caption{\label{seuils}Seuils pour identifier les cellules déviantes pour les trois gains et pour les quatre sous-détecteurs : EMB (calorimètre électromagnétique tonneau), EMEC (calorimètres électromagnétiques bouchons), FCAL (calorimètres vers l'avant) et HEC (calorimètres hadroniques bouchons).}
\end{table}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=4.0cm, keepaspectratio]{phd_calo/Ped-EM}
    &&
    \includegraphics[height=4.0cm, keepaspectratio]{phd_calo/Noise-EM}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite1}Stabilité des piédestaux pour le calorimètre électromagnétique tonneau, sur la période 2009-2010 (a). Stabilité du bruit pour le calorimètre électromagnétique tonneau, sur la période 2009-2010 (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=4.0cm, keepaspectratio]{phd_calo/Delay-EM}
    &&
    \includegraphics[height=4.0cm, keepaspectratio]{phd_calo/Ramp-EM}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite2}Stabilité des délais pour le calorimètre électromagnétique tonneau, sur la période 2009-2010 (a). Stabilité des rampes pour le calorimètre électromagnétique tonneau, sur la période 2009-2010 (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Ped-HG-EM}
    &&
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Ped-MG-FCal}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite3}Stabilité des piédestaux pour le calorimètre électromagnétique, gain haut, sur la période 2011 (a). Stabilité des piédestaux pour les calorimètres vers l'avant, gain moyen, sur la période 2011 (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Ped-MG-HEC}
    &&
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Noise-HG-EM}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite4}Stabilité des piédestaux pour les calorimètres hadroniques bouchons, gain moyen, sur la période 2011 (a). Stabilité du bruit pour le calorimètre électromagnétique, gain haut, sur la période 2011 (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Noise-MG-FCal}
    &&
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Noise-MG-HEC}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite5}Stabilité du bruit pour les calorimètres vers l'avant, gain moyen, sur la période 2011 (a). Stabilité du bruit pour les calorimètres hadroniques bouchons, gain moyen, gain haut, sur la période 2011 (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Ramp-HG-EM}
    &&
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Ramp-MG-FCal}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite6}Stabilité des rampes pour le calorimètre électromagnétique, gain haut, sur la période 2011 (a). Stabilité des rampes pour les calorimètres vers l'avant, gain moyen, sur la période 2011 (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}

  \begin{tabular}{ccc}
    \includegraphics[height=5.25cm, keepaspectratio]{phd_calo/Ramp-MG-HEC}
    &&
    \includegraphics[height=5.375cm, keepaspectratio]{phd_calo/noise_lar}
    \\
    (a) && (b)
  \end{tabular}

  \end{bigcenter}
  \caption{\label{stabilite7}Stabilité des rampes pour les calorimètres hadroniques bouchons, gain moyen, sur la période 2011 (a). Bruit électronique mesuré par sous-détecteur en fonction de la pseudo-rapidité $ \eta $, pour les calorimètres à argon liquide (b).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=0.7\linewidth, keepaspectratio]{phd_calo/ecal}
  \end{bigcenter}
  \caption{\label{ecal}Diagramme du système de calibration électronique complet.}
\end{figure}

Les figures \ref{stabilite3} à \ref{stabilite7} montrent la stabilités des piédestaux, du bruit et des rampes, période 2011, pour le calorimètre électromagnétique tonneau, les calorimètres vers l'avant et pour les calorimètres hadroniques bouchons. La stabilité est meilleure que sur la période 2009-2010 car le détecteur Atlas est en fonctionnement nominal. Des déviations sont néanmoins observées pour les calorimètres hadroniques bouchons, figure \ref{stabilite7} (a). Des investigations sont en cours mais il semble qu'il s'agisse d'un problème de température des FEB. La figure \ref{stabilite7} (b) montre le bruit électronique mesuré par sous-détecteur, en fonction de la pseudo-rapidité $ \eta $, pour les calorimètres à argon liquide. Le bruit électronique est de l'ordre de $ 10\MeV $ à $ 50\MeV $ pour les cellules du calorimètre électromagnétique alors qu'il est de l'ordre de $ 100\MeV $ à $ 600\MeV $ pour les cellules des calorimètres vers l'avant et les calorimètres hadroniques bouchons.

\subsection{Outils}

J'ai été tout particulièrement impliqué dans le développement des outils permettant la validation des campagnes de calibration. Cette section présente, succinctement l'architecture du système de validation automatique. Les composants logiciels suivants interviennent :

\paragraph{L'Automatic Processing (AP)} Il s'agit de l'outils chargé de la reconstruction des runs de calibration électronique à partir des données brutes. Son principal objectif est de calculer automatiquement les constantes de calibration des calorimètres à argon liquide. Il est autonome, possède un système de liste de diffusion par emails en cas d'erreurs ainsi que d'une application web dédiée. L'AP est implémenté sous forme de sept jeux de processus \emph{cron}\footnote{\emph{Cron} (du grec chronos) est un programme qui permet aux utilisateurs des systèmes Unix d'exécuter automatiquement des scripts, des commandes ou des logiciels à une date/heure spécifiée ou encore selon un cycle temporel prédéfini.} indépendants qui vérifient toutes les dix minutes si de nouvelles campagnes de calibration sont disponibles.

Ces jeux de processus sont de deux natures : i) Vérifier la présence de nouvelles campagnes (\emph{daily} ou \emph{weekly}) et créer des fichiers de configuration (deux premiers jeux). ii) Reconstruire, en utilisant Athena, les piédestaux, les rampes et les délais, calculer les paramètres des cartes de configuration, calculer les \emph{pulses} et enfin calculer les OFC (cinq seconds jeux). La figure \ref{apchain} montre la chaine de processus pour une campagne \emph{weekly} (a), (b) et (c) et la chaine de processus pour une campagne \emph{daily}.

Précisons également que l'AP produit un drapeau VERT, JAUNE ou ROUGE suivant la présence de problèmes au niveau la qualité des données. De plus, il effectue une pré-validation des campagnes de calibration électronique afin de détecter la présence d'erreurs au niveau des FEB ou un nombre anormalement élevé de canaux déviants. Tous les résultats sont enregistrés dans une base de fichiers \emph{root}. Le temps d'exécution est d'environ $ 35 $ minutes pour une campagne \emph{daily} et $ 8 $ heures pour une campagne \emph{weekly}.

\begin{figure}[!ht]
  \begin{bigcenter}
    \includegraphics[width=0.9\linewidth, keepaspectratio]{phd_calo/ap}
  \end{bigcenter}
  \caption{\label{apchain}Chaine de processus pour une campagne \emph{weekly} (a), (b) et (c) et chaine de processus pour une campagne \emph{daily}.}
\end{figure}

\paragraph{L'Automatic Validation Tool (AVT)} Il s'agit de l'outils chargé de la validation de la campagne de validation. Écrit en python, l'AVT est lancé automatiquement, juste après l'AP. Il choisit également la campagne de référence, effectue la validation en détectant les FEB/cellules déviantes, puis, enregistre les résultats dans une base de donnée grâce à l'ECalDBLib.

\paragraph{L'Electronic Calibration DataBase Library (ECalDBLib)} Il s'agit de la bibliothèque chargée de maintenir et consulter la base de données de calibration électronique (ECalDB). Écrite en python, l'ECalDBLib est utilisée par tous les outils haut niveau et propose une API bas niveau (SQL) et haut niveau (python). La base de donnée est implémentée en SQLite (Oracle à terme), voir figure \ref{sql}, elle contient quatre tables : les campagnes (type, date, runs de calibrations, état global des champs magnétiques, qualité\footnote{Il s'agit d'un drapeau VERT, JAUNE ou ORANGE qui indique la présence de décalage dans les constantes de calibration, la présence de nombreuse cellules et/ou FEB déviante ou simple la présence de problèmes au niveau des la prises de données. Le choix est effectué par la personne responsable de la campagne de calibration puis il est discuté en réunion.} globale de la validation, etc\dots), les runs de calibration (type, date, sous-détecteurs, état des champs magnétiques, qualité$ ^\textrm{\scriptsize{4}} $ de la validation, etc\dots), les cellules déviantes (adresse\footnote{Les cellules sont identifiées par un numéro de \emph{feed-through} $ FT $, par un numéro de \emph{slot} $ SL\in[1,15] $ (il n'y a toujours qu'un \emph{slot} pour une FEB) et enfin par un numéro de canal $ CH\in[0,127] $. Chaque cellule possède aussi une ligne de calibration $ CL\in[0,127] $.} de la cellule, valeur des déviations, etc\dots) et toutes les FEB déviantes ou non (adresse$ ^\textrm{\scriptsize{5}} $ de la FEB, valeur des déviations, etc\dots). Conjointement à la bases de données SQL, une base de fichiers \emph{root} contenant toutes des informations issues de la validation, voir les tableaux \ref{ntuple_global} et \ref{ntuple_local} ainsi que des histogrammes de contrôle, voir le tableau \ref{histo_controle}. Il y a un fichier \emph{root} par sous-détecteur par gain, et par type de variable (piédestal, bruit, auto-corrélation, rampe, délai) soit 32 fichiers \emph{root} pour une campagne de calibration \emph{weekly}. Ces fichiers peuvent être effacés et, si besoin, reconstruits afin d'économiser de l'espace disque. La figure \ref{ecaldblib_api} énumère les fonctions haut niveau de l'ECalDBLib.

\begin{figure}[!ht]
  \begin{bigcenter}
    \includegraphics[width=0.9\linewidth, keepaspectratio]{phd_calo/sql}
  \end{bigcenter}
  \caption{\label{sql}Schéma SQL de la base de donnée de calibration électronique (SQL-ECalDB).}
\end{figure}

\begin{table}[!ht]
  \begin{bigcenter}

    \begin{tabular}{|c|l|}
      \hline
      \hline
        Variable (globales) & description\\
      \hline
	channelId & identifiant du canal\\
	barrel\_ec & tonneau ou bouchons\\
	pos\_neg & $ \phi>0 $ ou $ \phi<0 $\\
	FT & numéro de \emph{feedthough}\\
	slot & numero de \emph{slot}\\
	channel & numero de \emph{canal}\\
	calibLine & numero de ligne de calibration\\
	badChan & canal problématique connu\\
	threshold & seuil de déviation pour les variables deltaXXX, voir tableau \ref{seuils}\\
      \hline
    \end{tabular}

  \end{bigcenter}
  \caption{\label{ntuple_global}Format des fichiers \emph{validation} de la base de données ROOT-ECalDB. Il y a un fichier par sous-détecteur, par gain par variable et une entrée par cellule. Fichiers Ntuple\_$\{$SUB\_DETECTOR$\}$\_$\{$VARIABLE$\}$\_$\{$GAIN$\}$\_$\{$CAMPAIGN$\}$.root}
\end{table}

\begin{table}[!p]
  \begin{bigcenter}

    \begin{tabular}{|c|l|}
      \hline
      \hline
        Variable (piédestal) & description\\
      \hline
	ped & piédestal\\
	deltaPed & déviation du piédestal par rapport à la référence\\
      \hline
      \multicolumn{2}{c}{}\\
      \hline
      \hline
        Variable (bruit) & description\\
      \hline
	NOISE & bruit\\
	deltaNOISE & déviation du bruit par rapport à la référence\\
      \hline
      \multicolumn{2}{c}{}\\
      \hline
      \hline
        Variable (auto-corrélation) & description\\
      \hline
	Autocorr & auto-corrélation\\
	deltaAutocorr & déviation de l'auto-corrélation par rapport à la référence\\
      \hline
      \multicolumn{2}{c}{}\\
      \hline
      \hline
        Variable (rampe) & description\\
      \hline
	RAMP & ramp\\
	deltaRAMP & déviation de la ramp par rapport à la référence\\
      \hline
      \multicolumn{2}{c}{}\\
      \hline
      \hline
        Variable (délai) & description\\
      \hline
	DELAY & délai\\
	deltaDELAY & déviation du délai par rapport à la référence\\
      \hline
    \end{tabular}

  \end{bigcenter}
  \caption{\label{ntuple_local}Format des fichiers \emph{validation} de la base de données ROOT-ECalDB. Il y a un fichier par sous-détecteur, par gain par variable et une entrée par cellule. Fichiers Ntuple\_$\{$SUB\_DETECTOR$\}$\_$\{$VARIABLE$\}$\_$\{$GAIN$\}$\_$\{$CAMPAIGN$\}$.root}
\end{table}

\begin{table}[!p]
  \begin{bigcenter}

    \begin{tabular}{|c|l|}
      \hline
      \hline
        Histogramme (piédestal) & description\\
      \hline
        h\_Delta\_\{VARIABLE\}VScl\_\{SUB\_DETECTOR\} & \begin{minipage}{0.5\linewidth}\vspace{0.2cm}Déviation relative de la variable VARIABLE en fonction de la ligne de calibration\end{minipage}\\
        h\_Delta\_\{VARIABLE\}VSft\_\{SUB\_DETECTOR\} & \begin{minipage}{0.5\linewidth}\vspace{0.2cm}Déviation relative de la variable VARIABLE en fonction du \emph{feedthough} et du slot\end{minipage}\\
        h\_Delta\_\{VARIABLE\}\_\{SUB\_DETECTOR\} & \begin{minipage}{0.5\linewidth}\vspace{0.2cm}Distribution de la déviation relative de la variable VARIABLE par cellule (distribution gaussienne à l'intérieur du seuil si tout va bien)\end{minipage}\\
        h\_Delta\_\{VARIABLE\}\_\{SUB\_DETECTOR\} & \begin{minipage}{0.5\linewidth}\vspace{0.2cm}Distribution de la déviation relative de la variable VARIABLE par FEB (distribution gaussienne à l'intérieur du seuil si tout va bien)\end{minipage}\\
        h\_Occupancy\{SUB\_DETECTOR\} & \begin{minipage}{0.5\linewidth}\vspace{0.2cm}Carte d'occupation des FEB\end{minipage}\\
      \hline
    \end{tabular}

  \end{bigcenter}
  \caption{\label{histo_controle}Format des fichiers \emph{histogramme} de la base de données ROOT-ECalDB. Il y a un fichier par sous-détecteur, par gain par variable et une entrée par cellule. Fichiers Figure\_$\{$SUB\_DETECTOR$\}$\_$\{$VARIABLE$\}$\_$\{$GAIN$\}$\_$\{$CAMPAIGN$\}$.root}
\end{table}

\paragraph{L'Electronic Calibration Console (ECalConsole)} Il s'agit d'une application sous la forme d'une console qui permet d'effectuer toutes les opérations de maintenance et de contrôle sur l'ECalDB. Elle permet d'interpréter des scripts écrits en python et permet directement l'utilisation des fonctions haut niveau de l'ECalDBLib.

\paragraph{L'Electronic Calibration Web Display (ECalWebDisplay)} Il s'agit d'une application sous la forme d'un ensemble de pages web qui permet d'afficher toutes les informations contenue dans l'ECalDB. Les figures \ref{web1} à \ref{web3} montrent quelques captures d'écran. Il est possible de consulter les informations sur les campagnes, sur les cellules déviantes, consulter l'historique des cellules déviantes, afficher des histogrammes de contrôle et enfin afficher des histogrammes de stabilité sur plusieurs campagnes.\\

Avec Julien Morel, j'ai développé les versions actuelles de l'AVT, de l'ECalDBLib et de l'ECalConsole. L'optimisation de ces outils est toujours en cours. A court terme, il est envisagé d'écrire une note technique. La figure \ref{ecal} montre le diagramme global du système de calibration électronique.\\

Remarque : Les figures \ref{stabilite3} à \ref{stabilite7} ont été obtenues semi-automatiquement grâce aux fonctionnalités de l'ECalDBLib.\\\\\\\\

\definecolor{bleupale}{cmyk}{0.2, 0.0, 0.0, 0.0}

\begin{figure}[!h]
\begin{center}
\begin{tabular}{c}
\begin{lstlisting}[language=Python,basicstyle=\tiny,backgroundcolor=\color{bleupale}]
CampaignByDQFlag(<status GREEN|YELLOW|RED>)
CampaignByDate(<date_start YYYY-MM-DD>, <date_stop YYYY-MM-DD>)
CampaignByFlag(<status GREEN|YELLOW|RED>)
CampaignById(<campaign>)
CampaignByMagneticFieldStatus(<toroid_status ON|OFF>, <solenoid_status ON|OFF>)
CampaignByRef(<campaign>)
CampaignByType(<type DAILY|WEEKLY>)
CampaignFormat(<item>|<list>)
CampaignId()
CampaignList()
ChannelByCampaign(<campaign>, <sub_sub_partition>)
ChannelByCampaignCH(<campaign>, <sub_sub_partition>, <feed through>, <slot>, <channel>)
ChannelByCampaignFT(<campaign>, <sub_sub_partition>, <feed through>)
ChannelByCampaignSL(<campaign>, <sub_sub_partition>, <feed through>, <slot>)
ChannelFormat(<item>|<list>)
CheckChannel(<sub_sub_partition>, <ft>, <sl>, <ch>[[, <toroid_status>, <solenoid_status>]])
CheckFeb(<sub_sub_partition>, <ft>, <sl>[[, <toroid_status>, <solenoid_status>]])
Commit()
Execute(<SQL query>)
FebByCampaign(<campaign>, <sub_sub_partition>)
FebByCampaignFT(<campaign>, <sub_sub_partition>, <feed through>)
FebByCampaignSL(<campaign>, <sub_sub_partition>, <feed through>, <slot>)
FebFormat(<item>|<list>)
MergeCampaignsById([<id1>,<id2>,...])
ReferenceId(<toroid_status ON|OFF>, <solenoid_status ON|OFF>)
RemoveCampaignEntryById(<campaign>)
RootFigure(<campaign>, <partition EM|EMPS|HECFCAL>, <type PEDESTAL|RAMP|DELAY>)
RootFiles(<run>, <type PEDESTAL|RAMP|DELAY>)
RootNtuple(<campaign>, <partition EM|EMPS|HECFCAL>, <type PEDESTAL|RAMP|DELAY>)
RunByCampaign(<campaign>)
RunByDQFlag(<status GREEN|YELLOW|RED>)
RunByDate(<date_start YYYY-MM-DD>, <date_stop YYYY-MM-DD>)
RunByFlag(<status GREEN|YELLOW|RED>)
RunByGain(<gain H|L|M>)
RunById(<run>)
RunByPartition(<partition EM|EMPS|HECFCAL>)
RunByType(<type PEDESTAL|RAMP|DELAY>)
RunFormat(<item>|<list>)
UpdateCampaignDBStatus(<campaign>, <db_status CURRENT|YES|NO>)
UpdateCampaignDQFlag(<campaign>, <flag GREEN|YELLOW|RED>)
UpdateCampaignFlag(<campaign>, <flag GREEN|YELLOW|RED>)
UpdateRunDQFlag(<campaign>, <flag GREEN|YELLOW|RED>)
UpdateRunFlag(<campaign>, <flag GREEN|YELLOW|RED>)
ValidationPlots(<campaign>, <partition EM|EMBPS|HECFCAL>, <type PEDESTAL|RAMP|DELAY>, <gain H|M|L>)

sub_sub_partition := EMBA|EMBC|EMECA|EMECC|EMBPSA|EMBPSC|EMECPSA|EMECPSC|FCALA|FCALC|HECA|HECC
\end{lstlisting}
\end{tabular}
\end{center}
  \caption{\label{ecaldblib_api}Fonctions haut niveau de manipulation de l'ECalDB accessibles depuis l'ECal\-DBLib ou de l'ECalDBConsole.}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=1.1\linewidth, keepaspectratio]{phd_calo/web1}
  \end{bigcenter}
  \caption{\label{web1}Electronic Calibration Web Display : visualisation d'une campagne de calibration. Nous apercevons la liste des canaux déviants avec la valeur des déviations pour chaque variable et pour les trois gains.}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=1.1\linewidth, keepaspectratio]{phd_calo/web2}
  \end{bigcenter}
  \caption{\label{web1}Electronic Calibration Web Display : visualisation du \emph{pulse} d'une cellule problématique (deadReadout/deadCalib).}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=1.1\linewidth, keepaspectratio]{phd_calo/web3}
  \end{bigcenter}
  \caption{\label{web2}Electronic Calibration Web Display : visualisation de l'historique d'une cellule.}
\end{figure}

\begin{figure}[!p]
  \begin{bigcenter}
    \includegraphics[width=1.1\linewidth, keepaspectratio]{phd_calo/web4}
  \end{bigcenter}
  \caption{\label{web3}Electronic Calibration Web Display : visualisation de la stabilité d'une cellule.}
\end{figure}

